---
title: Xbox Live 多人游戏概念
author: KevinAsgari
description: 了解 Xbox Live 多人游戏系统使用的常见多人游戏概念。
ms.assetid: 1e765f19-1530-4464-b5cf-b00259807fd3
ms.author: kevinasg
ms.date: 08/25/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: xbox live, xbox, 游戏, uwp, windows 10, xbox one, 多人游戏
ms.localizationpriority: medium
ms.openlocfilehash: cdd06e18c2793877085b8081050fdbc04584143d
ms.sourcegitcommit: 72710baeee8c898b5ab77ceb66d884eaa9db4cb8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/12/2018
ms.locfileid: "3880754"
---
# <a name="xbox-live-multiplayer-concepts"></a>Xbox Live 多人游戏概念

本主题介绍了大量常用于 Xbox Live 文档的重要的多人游戏术语和概念。 熟练掌握这些概念将帮助你理解 Xbox Live 多人游戏的工作原理。

## <a name="multiplayer-session"></a>多人游戏会话

多人游戏会话表示一组 Xbox Live 用户和与其关联的属性。 此会话由作品创建和维护，并表现为驻留在 Xbox Live 云端的安全 JSON 文档。 会话文档本身包含有关连接到会话的 Xbox Live 用户、可用位置数量、自定义元数据（适用于会话和各会话成员）以及与游戏会话相关的其他信息。

每个会话都基于会话模板，该模板由游戏开发人员定义，并在 Xbox Live 服务配置中针对游戏实例进行配置。

尽管作品可以创建和更新会话，但不能直接删除会话。  相反，一旦会话中的所有玩家都被删除，Xbox Live 多人游戏服务将在指定的超时时间后自动删除会话。 有关会话的详细信息，请参阅 [MPSD 会话详细信息](multiplayer-appendix/mpsd-session-details.md)。

游戏可以选择使用多个会话，但通常实现多人游戏会使用两个会话：

* 大厅会话 - 表示一组好友的会话，这些好友想在游戏的多个回合、等级和地图等中始终在一起。
* 游戏会话 - 表示在游戏的特定会话实例（如回合、比赛、等级等）中游戏的玩家的会话。该会话可以包括已加入会话实例的多个大厅会话中的成员（通常通过匹配服务）。

下面是示例场景：Sally 想和她的朋友 John 和 Lisa 进行多人游戏。 Sally 启动一个游戏，并邀请 John 和 Lisa 进入她的游戏。 加入后，Sally、John 和 Lisa 都在大厅会话中。 在此会话中，他们决定在线和其他玩家比赛。 该游戏创建游戏会话，并使用 Xbox Live 匹配服务和其他 Xbox Live 玩家一起填补剩余空位。

假设匹配到 Bob 和 Joe 与他们一起，那么就是他们这五个人在这一回合中一起玩。 这一回合结束后，Sally、John 和 Lisa 离开游戏会话，但仍然都位于大厅会话中（没有 Bob 和 Joe），并且可以选择开始另一回合或切换到其他游戏模式。

### <a name="session-member"></a>会话成员

会话成员是处于会话中的 Xbox Live 用户。

### <a name="arbiter"></a>仲裁程序

仲裁程序是管理游戏会话状态的控制台或设备。 例如，为了找到更多玩家，仲裁程序会负责播发游戏会话进行匹配。

仲裁程序由作品设置。 它可能会与游戏的主机相同，但没有必要一定相同。

### <a name="session-host"></a>会话主机

会话主机是运行玩游戏模拟的控制台或设备，此模拟适用于在基于主机的对等网络体系结构上生成的游戏。 此控制台或设备通常与仲裁程序相同，但没有必要一定相同。

## <a name="multiplayer-service-session-directory"></a>多人游戏服务会话目录

Xbox Live 多人游戏服务在 Xbox Live 云端运行，并跨多个客户端集中游戏的多人游戏系统元数据。 跟踪此元数据的系统称为多人游戏会话目录，或简称 MPSD。 你可以将 MPSD 视为活动游戏会话库。 你的作品可以添加、搜索、修改或删除与你的作品相关的活动会话。 在必要时，MPSD 还管理会话状态和更新会话。

MPSD 允许作品分享连接用户组所需的基本信息。 它确保会话功能已同步并保持一致。 它与 shell 和 Xbox One 主机操作系统协调发送/接受邀请和通过玩家卡加入游戏。

### <a name="session-handles"></a>会话句柄

使用数据块组合在 MPSD 中唯一地标识会话：

* 作品的服务配置 ID (SCID)
* 用于创建会话的会话模板名称
* 会话名称

会话句柄是包含对存在于 MPSD 中的特定会话的引用的 JSON 对象。 会话句柄使 Xbox Live 成员可加入现有会话。

每个会话句柄包括唯一标识句柄的 GUID，它允许允许作品使用单个 GUID 引用会话。

以下是几种类型的会话句柄：

* 邀请句柄
* 搜索句柄
* 活动句柄
* 相关句柄
* 转移句柄

#### <a name="invite-handle"></a>邀请句柄

当成员被邀请加入游戏时，邀请句柄将传递给他。 邀请句柄包含可让受邀成员的游戏加入正确会话的信息。

#### <a name="search-handle"></a>搜索句柄

搜索句柄包含与会话相关的其他元数据，而且它允许作品搜索符合选定标准的会话。

#### <a name="activity-handle"></a>活动句柄

活动句柄可让成员查看其社交网络上的其他成员在玩的游戏，还可用于加入好友的游戏。

#### <a name="correlation-handle"></a>相关句柄

相关句柄可有效地作为会话别名使用，这样可使游戏通过使用相关句柄的 ID 引用会话。

### <a name="transfer-handle"></a>转移句柄

转移句柄用于将玩家从一个会话移到另一个会话。

### <a name="invites"></a>邀请

Xbox Live 提供多人游戏服务支持的邀请系统。 它允许玩家邀请其他玩家加入自己的游戏会话。 受邀玩家收到游戏邀请，游戏使用此信息加入现有会话和多人游戏体验。 作品控制邀请流程和可以发送邀请的时间。

用户可通过 shell 或直接从作品发送邀请。 可通过游戏动态设置邀请的通知文本，向受邀玩家提供更多信息。 邀请还可包含对玩家不可见的游戏的其他数据，同时也可用于传递其他信息。

### <a name="join-in-progress"></a>加入进程

除了具有邀请功能，Xbox Live 还为玩家提供了 shell 选项以加入好友或其他认识的玩家的活动游戏会话。 这使得加入活动游戏会话的另一条路径成为可能，且仍然由 MPSD 驱动。 作品控制何时可以加入会话和公开哪一会话可加入进程。

### <a name="protocol-activation"></a>协议激活

如果 Sally 邀请 Lisa 加入她的游戏，Lisa 会在设备上收到通知，她可以选择接受还是拒绝。

如果她接受邀请，操作系统将尝试启动游戏，如果游戏尚未运行，则触发激活事件，该事件包含激活游戏的原因以及其他详细信息（如果是邀请，例如，详细信息包括受邀玩家的 ID 和已邀请成员加入的会话。）

处理此事件的过程称为协议激活，表明游戏应自动进入某个特定状态，这将在激活事件参数中作详细介绍。 如果成员正在加入多人游戏，则将会话句柄 ID 指定为参数之一。

在 Lisa 的例子中，接受邀请会自动开始游戏（如果需要）并使她与 Sally 加入到同一游戏会话，无需 Lisa 采取任何进一步的操作。

可通过接受邀请、通过成员的个人资料卡加入另一个成员的游戏或单击深层链接的成就触发协议激活。

## <a name="smartmatch-matchmaking"></a>SmartMatch 匹配

SmartMatch 是适用于匿名匹配的 Xbox Live 服务的名称。 该服务基于可配置的匹配规则集匹配相同游戏的玩家。

匹配服务与 MPSD 紧密协作并将会话用于匹配输入和输出。 在该服务上执行匹配，从而可使游戏在匹配流程中轻松地提供其他体验，例如游戏内的单人玩家。

想要进入匹配的个人或小组创建匹配票证会话，然后请求匹配服务查找其他要开始与其建立匹配的玩家。 这会导致在一段时间内创建驻留在匹配服务内（在匹配漏斗上）的临时“匹配票证”。

匹配服务基于规则配置、为各玩家存储的数据以及在匹配请求时给定的任何其他信息选择会话以共同游戏。 然后，该服务创建匹配目标会话，此会话包含已匹配的所有玩家，并向用户的游戏告知匹配。

目标会话准备就绪后，游戏可执行服务质量 (QoS) 检查以确认该组是否可以共同游戏，和/或将玩家加入会话以开始游戏。 在 QoS 过程和匹配游戏期间，游戏在 MPSD 内使会话状态保持最新并从 MPSD 接收关于会话更改的通知。 此类更改包括用户加入或离开，以及对会话仲裁程序的更改。

### <a name="match-ticket-session"></a>匹配票证会话

匹配票证会话表示适用于想要进行匹配的玩家的客户端。 通常基于同时位于大厅的一组玩家或其他游戏特定的玩家分组。 在某些情况下，票证会话可能是已在进行中并在寻找更多玩家的游戏会话。

### <a name="match-ticket"></a>匹配票证

向匹配提交票证会话会创建跟踪匹配尝试的匹配票证。 可以将属性添加到票证，例如，游戏地图或玩家等级。 这些内容连同票证会话中的玩家属性均用于确定匹配。

### <a name="hoppers"></a>漏斗

漏斗是在匹配开始时收集并指定票证的逻辑位置。 仅可匹配同一漏斗内的票证。 作品可能具有多个漏斗，但每次只能对一个开始匹配。 例如，游戏可以创建一个漏斗，对于该漏斗来说，玩家技能是最重要的匹配项目。 它可以使用另一个漏斗，在该漏斗中，只有玩家购买了相同的可下载内容才会匹配。

在服务配置中配置漏斗以进行匹配。 待定。

## <a name="quality-of-service-qos"></a>服务质量 (QoS)

当玩家在线进行多人游戏时，游戏质量受到正在托管游戏的设备之间的网络通信的影响。 糟糕的网络可能会造成不愉快的游戏体验，例如带宽不足或延迟导致滞后或断开连接。

QoS 是指测量玩家之间的在线连接强度（带宽和延迟），以确保所有玩家享有足够好的网络连接质量。 这对于在匹配期间进行匹配以保证良好体验（由于网络）的玩家尤为重要。 不太适用于好友共同游戏且通常愿意接受连接较差导致的后果的邀请情况。

你可以配置会话以基于特定标准自动处理 QoS，或每当有人加入该会话时，你的游戏都能处理 QoS 评估。
