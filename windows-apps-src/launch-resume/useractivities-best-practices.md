---
author: PatrickFarley
title: 用户活动的最佳做法
description: 本指南概述了用于创建和更新用户活动的推荐的做法。
keywords: 用户活动, 时间线, cortana 从你离开的位置继续, cortana 从我离开的位置继续, project rome
ms.author: pafarley
ms.date: 08/23/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
ms.localizationpriority: medium
ms.openlocfilehash: b11151df981a4b5ce233458581d21e405be9844c
ms.sourcegitcommit: 7aa1933e6970f878faf50d59e1f799b90afd7cc7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/05/2018
ms.locfileid: "3382519"
---
# <a name="user-activities-best-practices"></a>用户活动的最佳做法

本指南概述了用于创建和更新用户活动的推荐的做法。 有关 Windows 上的用户活动功能的概述，请参阅[继续用户活动，甚至是在设备](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities)。 或者，请参阅在其它开发平台上的活动实现的项目 rome 的[用户活动部分](https://docs.microsoft.com/windows/project-rome/user-activities/)。

## <a name="when-to-create-or-update-user-activities"></a>何时创建或更新用户活动

由于每个应用都不同，它由每个开发人员，以确定将在应用中的操作映射到用户活动的最佳方式。 用户活动会显示在 Cortana 和时间线，侧重于提高用户工作效率和效率，让他们回到他们在过去中访问的内容。

**一般指南**

* **记录一组相关的用户操作的单个活动。** 这尤其是对音乐播放列表或电视节目： 单个活动可以定期以反映用户的进度更新。 在此情况下，你将拥有单个用户活动具有多个表示期间参与跨多个天或周的历史记录项。 这同样适用于基于文档的活动的用户进行你的应用内逐步进度。
* **在云中存储用户数据。** 如果你想要支持跨设备活动，你将需要确保重新使用此活动所需的内容存储到云位置。 特定于设备的活动将显示在时间线在设备上创建活动的但可能未显示在其他设备上。
* **不要创建活动的用户不需要恢复的操作。** 如果你的应用程序用于完成简单、 一次性不会保留状态的操作，你可能不需要创建用户活动。
* **不要创建其他用户完成的操作所需的活动。** 如果外部帐户将用户发送一条消息，或@-mentions它们在你的应用不应创建活动此。 操作中心通知更好地提供此类操作。
  * 协作方案是个例外： 如果多个用户正在开发同一个活动一起 （如 Word 文档），将在其中的另一个用户已更改后你的用户的情况。 在此情况下，你可能想要更新现有的活动，以反映文档所做的更改。 这将涉及无需创建新的历史记录项更新现有的用户活动内容数据。

**针对特定类型的应用的指南**

虽然每个应用不同，大多数应用程序将分为以下交互模式。
* **基于文档的应用**-使用反映期间使用的一个或多个历史记录项创建每个文档，一个活动。 请务必更新您的活动，如对文档进行更改。
* **游戏**-创建一个活动针对每个游戏保存或世界。 如果你的游戏支持单个序列的级别，你可以重新发布相同的活动段时间后，尽管你可能想要更新内容的数据，以显示最新的进度或成就。
* **实用程序应用**，如果没有任何用户将需要保留和恢复在应用中，你不需要使用用户活动。 例如，如计算器一个简单的应用。
* **业务线应用**，许多应用存在用于管理简单的任务或工作流。 创建一个通过你的应用访问每个单独的工作流活动 （例如，支出报告将每个是单独的活动，以便用户可以单击活动来了解特定报告是否已批准）。
* **媒体播放应用**— 创建每个逻辑分组的内容 （如播放列表、 程序或独立内容） 的一个活动。 应用开发人员的基础问题是每个条内容 （电视节目，歌曲） 是否计作独立内容或集合的一部分。 作为一般规则，如果用户选择要播放的集合或连续的内容，作为一个整体集合是活动。 如果他们选择要播放一段内容，则内容的一段为活动。 请参阅下面的详细指南。
  * **音乐： 相册 / 艺术家 / 流派**— 用户选择唱片集，艺术家或流派并达到**播放**时，该集合是否活动。无法写入的每个歌曲单独的活动。 简短的集合，如单个相册或按随机顺序正在播放的集合，你可能不需要更新活动以反映用户的当前位置。 用于如相册或播放列表的时间顺序播放，记录你相册中的位置很有意义。
  * **音乐： 智能播放列表**— 按随机顺序播放音乐的应用程序应记录该播放列表的单个活动。 如果用户在第二次播放该播放列表，你将为同一个活动创建的其他历史记录。 记录在播放列表中的用户的当前位置则不需要因为是随机的顺序。
  * **电视系列**，如果你的应用配置为播放下一集，当前完成后，你应编写电视一系列的单个活动。 在多个查看会话播放各种集时，你将更新您的活动，以反映该系列中的当前位置，并将创建多个历史记录。
  * **电影**— 电影是一款独立的内容，并应具有其自己的历史记录。 如果用户停止观看电影一部分的方式通过，则需要记录其位置。 当他们想要在以后恢复时，活动无法恢复他们离开的位置，电影或甚至询问用户是否要恢复或开始。

## <a name="user-activity-design"></a>用户活动设计

用户活动由三个组件组成： 激活 URI、 视觉数据和内容的元数据。
* 在激活 URI 是可以将传递给应用程序或经验才能继续具有特定上下文的应用程序的 URI。 通常情况下，这些链接可将协议处理程序方案 (例如，"my-app: //page2") 的形式。 它是由开发人员确定他们的应用将如何处理 URI 参数。 有关详细信息，请参阅[处理 URI 激活](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)。
* Visual 的数据，包括一组的必需和可选属性 (例如： 标题、 描述或自适应卡片元素)，允许用户直观标识活动。 有关如何为你的活动创建自适应卡片视觉对象的指南，请参阅下文。
* 内容的元数据是可用于在特定上下文的活动组和检索的 JSON 数据。 这通常情况下，采用的形式http://schema.org数据。 请参阅以下指南填写此数据。

### <a name="adaptive-card-design-guidelines"></a>自适应卡设计指南

当活动显示在时间线时，它们使用[自适应卡片框架](https://docs.microsoft.com/adaptive-cards/)进行显示。 如果开发人员不提供每个活动的自适应卡片，时间线将自动创建简单卡基于应用名称/图标、 所需的标题字段中和可选说明字段。 

应用开发人员最好提供自定义卡使用简单的自适应卡 JSON 架构。 有关如何构建自适应卡片对象，请参阅技术说明的[自适应卡片文档](https://docs.microsoft.com/adaptive-cards/authoring-cards/getting-started)。 请参阅以下指南设计用户活动中的自适应卡片。
* 使用图像
  * 为每个活动，尽可能使用唯一的图像。 你的应用程序名称和图标将自动显示旁边您的活动卡。其他图像可帮助用户找到他们要查找的活动。
  * 图像不应包含文本，用户需要读取。 此文本不会提供给具有辅助功能需求的用户，并且无法搜索。
  * 如果图像不包含文本，并且可以裁剪为有关比例为 2:1，你应将其用作背景图像。 这将导致在时间线中将突出粗体活动卡。 图像将略有暗，并确保文本保持可见在卡上，最好仅用作活动的名称在此情况下，较小的文本会变得难以阅读。
  * 如果图像不裁剪为 2:1，你应将其放在活动卡内。  
    * 如果纵横比的正方形或纵向布局，锚定无边距卡右侧的图像。
    * 如果纵横比是横向，锚定到卡的右上角的图像。
* 每个活动需要提供一个活动的名称，将始终显示。
  * 此名称应显示在使用大粗体选项卡的左上角。 它是非常重要名称轻松识别，因为这是仅一部分用户将看到当活动显示在 Cortana 方案。 时间线中显示相同的名称使用户更轻松地浏览大量的活动。
* 所有从你的应用的活动中使用相同的视觉样式，，以便用户可以轻松地在时间线中找到你的应用的活动。
  * 例如，活动应全部使用相同的背景色。
* 请谨慎使用补充文本信息。 
  * 避免在卡填充带有文本，并且仅使用帮助用户查找正确的活动或反映状态信息 （如在特定的任务中的当前进度） 的补充信息。

### <a name="content-metadata-guidelines"></a>内容的元数据指南

用户活动还可以包含内容的元数据，Windows 和 Cortana 使用分类活动并生成推断。 （如果用户购买特定产品在不同的应用和网站），然后可以围绕一个特定的主题，例如位置 （如果用户正在研究假期）、 （如果用户正在研究内容） 的对象或操作分组活动。 它是一个好主意来表示名词和参与活动的动词命令。 

在以下示例中，内容的元数据 JSON，遵循标准的[Schema.org](https://schema.org/)，表示该方案:"John 播放生气鸟与 Steve。"

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>关键 API

* [UserActivities 命名空间](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>相关主题

* [用户活动 （项目 rome 文档）](https://docs.microsoft.com/windows/project-rome/user-activities/)
* [自适应卡片](https://docs.microsoft.com/adaptive-cards/)
* [自适应卡片可视化工具，示例](http://adaptivecards.io/)
* [处理 URI 激活](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)
* [使用 Microsoft Graph、活动源和自适应卡片在任何平台上与客户互动](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph/)
