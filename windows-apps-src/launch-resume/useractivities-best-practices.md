---
author: PatrickFarley
title: 用户活动最佳实践
description: 本指南概述了用于创建和更新用户活动的建议的做法。
keywords: 用户活动, 时间线, cortana 从你离开的位置继续, cortana 从我离开的位置继续, project rome
ms.author: pafarley
ms.date: 08/23/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
ms.localizationpriority: medium
ms.openlocfilehash: b11151df981a4b5ce233458581d21e405be9844c
ms.sourcegitcommit: c6d6f8b54253e79354f8db14e5cf3b113a3e5014
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/24/2018
ms.locfileid: "2843750"
---
# <a name="user-activities-best-practices"></a>用户活动最佳实践

本指南概述了用于创建和更新用户活动的建议的做法。 有关 Windows 上的用户活动功能的概述，请参阅[继续用户活动，甚至跨设备](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities)。 或者，请参阅在其他开发平台上的活动实现的项目 Rome 的[用户活动部分](https://docs.microsoft.com/windows/project-rome/user-activities/)。

## <a name="when-to-create-or-update-user-activities"></a>何时创建或更新用户活动

由于每个应用程序不同，这取决于每个开发人员无法确定将应用程序中的操作映射到用户活动的最佳方式。 用户活动将供展示 Cortana 和日程表，侧重于增加用户工作效率和效率，让他们回到它们在过去中访问过的内容。

**一般指南**

* **记录一组相关的用户操作的单个活动。** 这是音乐播放列表或 TV 显示密切相关： 单个活动可更新的时间间隔定期以反映用户的进度。 在这种情况下，您将拥有的项目的时间段代表跨多个天或数周的多个历史记录项与单个用户活动。 这同样适用于基于文档的活动用户在其进行应用程序中的逐步进度。
* **在云中存储用户数据。** 如果您想要支持跨设备活动，您将需要以确保需要重新使用此活动的内容存储到云位置。 设备特定的活动将显示在时间线在设备上创建活动的但可能不会出现在其他设备上。
* **操作的用户不需要恢复时不创建活动。** 如果您的应用程序用于完成简单、 一次性不会保留状态的操作，您可能不需要创建用户活动。
* **不要创建活动完成由其他用户的操作。** 如果外部帐户将用户发送一条消息，或@-mentions其在您的应用程序内您不应创建活动此。 此类型的操作更好地均由操作中心通知。
  * 协作方案是异常： 如果多个用户正在使用同一个活动组合在一起 （如 Word 文档），将在其中另一个用户所做的更改后用户的情况。 在这种情况下，您可能要更新现有的活动，以反映对文档所做的更改。 这将涉及更新现有的用户活动内容数据，而无需创建一个新的历史记录项。

**为特定类型的应用程序的指南**

不同每个应用程序时，大多数应用程序将分为以下交互模式。
* **基于文档的应用程序**— 这就反映了使用时段的一个或多个历史记录项创建文档，每个活动。 非常重要更新您的活动，如对文档进行更改。
* **游戏**— 创建的每个游戏保存或 world 一个活动。 如果您的游戏支持单个序列的级别，您可以重新发布同一个活动随时间推移，虽然您可能希望更新的内容的数据显示的最新的进度或成绩。
* **实用程序应用程序**— 如果没有任何应用程序的用户需要保留并恢复中，不需要使用用户活动。 较好的示例是一个简单的应用程序，如计算器。
* **业务线应用程序**— 用于管理简单任务或工作流存在多个应用程序。 创建一个通过您的应用程序访问每个单独的工作流活动 （例如，费用报告每个采用单独的活动，以便用户可以单击活动以查看是否特定报告已获得批准）。
* **媒体播放应用程序**— 创建的内容 （如播放列表、 程序或独立内容） 的逻辑分组每一个活动。 为应用程序开发人员提供的基础问题是内容的每一段 （TV 第部分、 歌曲） 是否计数为独立内容或集合的一部分。 一般来说，如果用户选择播放集合或顺序内容作为一个整体集合是活动的。 如果他们选择播放单项内容，则一段是内容的活动。 请参阅下面的更多特定指南。
  * **音乐： 相册/艺术家/流派**— 如果用户选择相册、 艺术家或流派并点击**播放**，该集合是活动的;不写入的每个歌曲单独的活动。 短集合，如单个相册或正在播放顺序是随机的集，您可能不需要更新活动的以反映用户的当前位置。 如相册或播放列表的长顺序播放，录制您唱片集内的位置可能有意义。
  * **音乐： 智能播放列表**— 播放音乐按随机顺序应用程序应记录的播放列表的单个活动。 如果用户在第二次播放播放列表，您将为同一个活动创建其他历史记录。 因为顺序是随机，录制播放列表中的用户的当前位置没有必要。
  * **TV 系列**— 如果您的应用程序配置为在下一步第部分播放当前完成后，您应编写 TV 系列的单个活动。 跨多个查看会话中播放各种剧集，您将更新以反映在系列中，当前位置活动，并将创建多个历史记录。
  * **影片**— 电影是一段的内容，并应具有自己的历史记录。 如果用户停止观看通过影片部件的方式，则需要记录其位置。 时他们希望在将来恢复，活动无法继续的影片他们的回忆或甚至询问用户是否要恢复或从头开始。

## <a name="user-activity-design"></a>用户活动设计

用户活动由三个组件组成： 激活 URI、 可视化数据和内容元数据。
* 在激活 URI 是可以传递到应用程序或经验才能恢复具有特定的上下文应用程序的 URI。 通常，这些链接可将协议处理程序的方案 (例如，"我的 app://page2?action=edit") 的窗体。 由开发人员如何将其应用程序处理 URI 参数。 有关详细信息，请参阅[处理 URI activation](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation) 。
* 可视化数据，包含的一组必需的和可选属性 (例如： 标题、 说明或自适应卡元素)，允许用户来识别活动。 有关为您的活动创建自适应卡片可视对象的指南，请参阅下面。
* 内容元数据是可用于分组和检索特定的上下文下的活动的 JSON 数据。 通常，这采用的窗体http://schema.org数据。 有关填写此数据的指南，请参阅下面。

### <a name="adaptive-card-design-guidelines"></a>自适应卡片设计准则

当活动出现在日程表时，它们显示使用[自适应卡框架](https://docs.microsoft.com/adaptive-cards/)。 开发人员未提供用于每个活动自适应卡片，如果日程表将自动创建基于应用程序名称/图标、 所需的标题字段，以及可选说明字段的简单卡片。 

鼓励提供自定义卡使用简单的自适应卡片 JSON 架构将应用程序开发人员。 有关如何构建自适应卡对象，请参阅技术说明[自适应卡文档](https://docs.microsoft.com/adaptive-cards/authoring-cards/getting-started)。 请参阅下面的设计中用户活动的自适应卡的准则。
* 使用图像
  * 如果可能为每个活动，使用一个唯一的图像。 您的应用程序名称和图标自动将显示您的活动卡片; 旁边其他图像将有助于找到正在寻找活动的用户。
  * 图像不应包含文本的预期用户阅读。 此文本不能具有辅助功能的用户，并且无法搜索。
  * 如果图像不包含文字，并可以有关比例为 2:1 到裁剪，您应将其用作背景图像。 这会生成的时间线中突出显示的加粗活动卡片。 图像将稍微暗，并确保则文本保持在卡片上可见，鼓励仅为较小的文本会变得硬读取在这种情况下，使用活动的名称。
  * 如果不能为 2:1 裁剪图像，应将其放在活动卡片。  
    * 如果纵横比，且为方形还是纵向锚定无边距卡片右侧的图像。
    * 如果纵横比为横向，定位到的卡片右上角的图像。
* 每个活动需要提供一个活动的名称，其中应始终显示。
  * 此名称应中使用大型加粗文本选项卡的左上角显示。 非常重要，这是唯一的名称是容易识别，一部分用户会看到 Cortana 方案显示活动时。 日程表中显示相同的名称，使用户更轻松地浏览数量较大的活动。
* 从您的应用程序的活动的所有使用相同的视觉样式，以便用户可以轻松找到您的应用程序的活动的时间线中。
  * 例如，活动应所有使用相同的背景颜色。
* 请慎用补充文本信息。 
  * 避免填充卡片文本，并仅使用帮助用户查找正确的活动或反映状态信息 （如在特定任务的当前进度） 的补充信息。

### <a name="content-metadata-guidelines"></a>内容元数据的准则

用户活动还可以包含 Windows 和 Cortana 使用分类活动并生成推断的内容元数据。 （如果用户要购买特定产品跨不同的应用程序和网站），则可以围绕一个特定的主题，如位置 （如果用户正在研究假期）、 对象 （如果用户正在研究事物） 或操作组合活动。 最好表示名词和动词参与活动的。 

在以下示例中，内容元数据 JSON，关注的标准[Schema.org](https://schema.org/)，表示方案:"John 播放生气小鸟与 Steve。"

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>关键 API

* [UserActivities 命名空间](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>相关主题

* [用户活动 （项目 Rome 文档）](https://docs.microsoft.com/windows/project-rome/user-activities/)
* [自适应卡片](https://docs.microsoft.com/adaptive-cards/)
* [自适应卡片可视化工具，示例](http://adaptivecards.io/)
* [处理 URI 激活](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)
* [使用 Microsoft Graph、活动源和自适应卡片在任何平台上与客户互动](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph/)
